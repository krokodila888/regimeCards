name: Deploy to GitHub Pages

on:
  push:
    branches: [ master ] # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–µ—Ç–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è master

# –†–∞–∑—Ä–µ—à–∞–µ–º –∑–∞–ø–∏—Å—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü
permissions:
  contents: read
  pages: write
  id-token: write

# üëá –î–û–ë–ê–í–¨–¢–ï –≠–¢–ò –°–¢–†–û–ö–ò (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≤—Å–µ–≥–æ workflow):
concurrency:
  group: 'pages'
  cancel-in-progress: true

jobs:
  build-and-deploy:
    # üëá –î–û–ë–ê–í–¨–¢–ï –≠–¢–û–¢ –ë–õ–û–ö environment:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }} # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    runs-on: ubuntu-latest
    steps:
      # 1. –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–¥ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
      - name: Checkout
        uses: actions/checkout@v4

      # 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' # –£–∫–∞–∂–∏—Ç–µ –≤–∞—à—É –≤–µ—Ä—Å–∏—é Node

      # 3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
      - name: Install and Build
        run: |
          npm ci
          npm run build # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è Vite

      # 4. –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å–±–æ—Ä–∫–∏ –¥–ª—è –¥–µ–ø–ª–æ—è
      - name: Setup Pages
        uses: actions/configure-pages@v4

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          # –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å–æ —Å–±–æ—Ä–∫–æ–π (—É –≤–∞—Å —ç—Ç–æ build)
          path: './build'

      # 5. –î–µ–ø–ª–æ–∏–º –Ω–∞ GitHub Pages
      - name: Deploy to GitHub Pages
        id: deployment # üëà –≠—Ç–æ—Ç ID –Ω—É–∂–µ–Ω –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è URL (—Å–º. –≤—ã—à–µ –≤ environment)
        uses: actions/deploy-pages@v4
